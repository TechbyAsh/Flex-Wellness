# Small, stable base image
FROM node:20-alpine

# Create application directory
WORKDIR /app

# Copy only API package artifacts first (better caching)
COPY src/package*.json ./ 

# Install production dependencies
RUN npm install --omit=dev

# Copy full API source
COPY src/ ./

# Expose port (for documentation)
EXPOSE 3000

# Start API
CMD ["node", "server.js"]
